<!-- START: inst/pkgdown/templates/layout.html -->
<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- START: inst/pkgdown/templates/head.html -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="last-modified" content="2021-02-03 00:39:16 +0000">



<title>Programming With R: Understanding Factors</title>

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="favicons/swc/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="favicons/swc/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="favicons/swc/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="favicons/swc/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="favicons/swc/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="favicons/swc/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/swc/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/swc/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-128.png" sizes="128x128" />

<meta name="application-name" content="Software Carpentry - Programming With R"/>

<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="favicons/swc/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="favicons/swc/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="favicons/swc/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="favicons/swc/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="favicons/swc/mstile-310x310.png" />



<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>

<!--carpentries-->
<link href="css/syntax.css" rel="stylesheet">
<link href="css/lesson.css" rel="stylesheet">
<script src="js/lesson.js"></script>




<meta property="og:title" content="Understanding Factors" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- END:   inst/pkgdown/templates/head.html-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <!-- START: inst/pkgdown/templates/navbar.html -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Home</a>
        <!-- TODO: the logo is not centered in the nav bar and looks ugly... also there needs to be a better way of choosing the logo... probably on the R side.-->
        <a href="https://software-carpentry.org" class="pull-left">
          <img class="navbar-logo" src="img/swc-icon-blue.svg" alt="Software Carpentry logo" />
        </a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="CODE_OF_CONDUCT.html">Code of Conduct</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Episodes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-starting-with-data.html">Analyzing Patient Data</a>
    </li>
    <li>
      <a href="02-func-R.html">Creating Functions</a>
    </li>
    <li>
      <a href="03-loops-R.html">Analyzing Multiple Data Sets</a>
    </li>
    <li>
      <a href="04-cond.html">Making Choices</a>
    </li>
    <li>
      <a href="05-cmdline.html">Command-Line Programs</a>
    </li>
    <li>
      <a href="06-best-practices-R.html">Best Practices for Writing R Code</a>
    </li>
    <li>
      <a href="07-knitr-R.html">Dynamic Reports with knitr</a>
    </li>
    <li>
      <a href="08-making-packages-R.html">Making Packages in R</a>
    </li>
    <li>
      <a href="09-supp-intro-rstudio.html">Introduction to RStudio</a>
    </li>
    <li>
      <a href="10-supp-addressing-data.html">Addressing Data</a>
    </li>
    <li>
      <a href="11-supp-read-write-csv.html">Reading and Writing CSV Files</a>
    </li>
    <li>
      <a href="12-supp-factors.html">Understanding Factors</a>
    </li>
    <li>
      <a href="13-supp-data-structures.html">Data Types and Structures</a>
    </li>
    <li>
      <a href="14-supp-call-stack.html">The Call Stack</a>
    </li>
    <li>
      <a href="15-supp-loops-in-depth.html">Loops in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Learners
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="setup.html">Setup</a>
    </li>
    <li>
      <a href="reference.html"></a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Instructors
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="migration-notes.html">Migrating from Jekyll to {sandpaper}</a>
    </li>
  </ul>
</li>
<li class="dropdown-header">Learner Profiles</li>
<li>
  <a href="LICENSE.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

      <!--START: inst/pkgdown/templates/header.html-->


    <div class="panel panel-default life-cycle">
      <div id="life-cycle" class="panel-body alpha">
        
         This lesson is in the early stages of development (Alpha version) 
        
      </div>
    </div>


<!--END  : inst/pkgdown/templates/header.html-->

      </header>

<!-- START: inst/pkgdown/templates/content-title-body.html -->
<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Understanding Factors</h1>
    </div>

<div class="section level2 objectives">
<h2>Overview</h2>
<div class="row">
<div class="col-md-3">
<p><strong>Teaching: </strong> 20<br />
<strong>Exercises: </strong> 0</p>
</div>
<div class="col-md-9">
<p><strong>Questions</strong></p>
<div id="questions" class="section level2">
<h2>Questions</h2>
<ul>
<li>How is categorical data represented in R?</li>
<li>How do I work with factors?</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-md-3">

</div>
<div class="col-md-9">
<p><strong>Objectives</strong></p>
<ul>
<li>Understand how to represent categorical data in R.</li>
<li>Know the difference between ordered and unordered factors.</li>
<li>Be aware of some of the problems encountered when using factors.</li>
</ul>
</div>
</div>
</div>
<p>Factors are used to represent categorical data. Factors can be ordered or unordered and are an important class for statistical analysis and for plotting.</p>
<p>Factors are stored as integers, and have labels associated with these unique integers. While factors look (and often behave) like character vectors, they are actually integers under the hood, and you need to be careful when treating them like strings.</p>
<p>Once created, factors can only contain a pre-defined set values, known as <em>levels</em>. By default, R always sorts <em>levels</em> in alphabetical order. For instance, if you have a factor with 2 levels:</p>
<aside class="callout">
<div id="the-factor-command" class="section level3">
<h3>The <code>factor()</code> Command</h3>
<p>The <code>factor()</code> command is used to create and modify factors in R:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>sex &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;male&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>))</span></code></pre></div>
</div>
</aside>
<p>R will assign <code>1</code> to the level <code>"female"</code> and <code>2</code> to the level <code>"male"</code> (because <code>f</code> comes before <code>m</code>, even though the first element in this vector is <code>"male"</code>). You can check this by using the function <code>levels()</code>, and check the number of levels using <code>nlevels()</code>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">levels</span>(sex)</span></code></pre></div>
<pre class="output"><code>[1] &quot;female&quot; &quot;male&quot;  </code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="kw">nlevels</span>(sex)</span></code></pre></div>
<pre class="output"><code>[1] 2</code></pre>
<p>Sometimes, the order of the factors does not matter, other times you might want to specify the order because it is meaningful (e.g., “low”, “medium”, “high”) or it is required by particular type of analysis. Additionally, specifying the order of the levels allows us to compare levels:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>food &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a><span class="kw">levels</span>(food)</span></code></pre></div>
<pre class="output"><code>[1] &quot;high&quot;   &quot;low&quot;    &quot;medium&quot;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>food &lt;-<span class="st"> </span><span class="kw">factor</span>(food, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="kw">levels</span>(food)</span></code></pre></div>
<pre class="output"><code>[1] &quot;low&quot;    &quot;medium&quot; &quot;high&quot;  </code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="kw">min</span>(food) <span class="co"># doesn&#39;t work</span></span></code></pre></div>
<pre class="error"><code>Error in Summary.factor(structure(c(1L, 3L, 2L, 3L, 1L, 2L, 3L), .Label = c(&quot;low&quot;, : &#39;min&#39; not meaningful for factors</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>food &lt;-<span class="st"> </span><span class="kw">factor</span>(food, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true"></a><span class="kw">levels</span>(food)</span></code></pre></div>
<pre class="output"><code>[1] &quot;low&quot;    &quot;medium&quot; &quot;high&quot;  </code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a><span class="kw">min</span>(food) <span class="co"># works!</span></span></code></pre></div>
<pre class="output"><code>[1] low
Levels: low &lt; medium &lt; high</code></pre>
<p>In R’s memory, these factors are represented by numbers (1, 2, 3). They are better than using simple integer labels because factors are self describing: <code>"low"</code>, <code>"medium"</code>, and <code>"high"</code>" is more descriptive than <code>1</code>, <code>2</code>, <code>3</code>. Which is low? You wouldn’t be able to tell with just integer data. Factors have this information built in. It is particularly helpful when there are many levels (like the subjects in our example data set).</p>
<div class="challenge">
<div id="representing-data-in-r" class="section level2">
<h2>Representing Data in R</h2>
<p>You have a vector representing levels of exercise undertaken by 5 subjects</p>
<p><strong>“l”, “n”, “n”, “i”, “l”</strong> ; n=none, l=light, i=intense</p>
<p>What is the best way to represent this in R?</p>
<ol style="list-style-type: lower-alpha">
<li><p>exercise &lt;- c(“l”, “n”, “n”, “i”, “l”)</p></li>
<li><p>exercise &lt;- factor(c(“l”, “n”, “n”, “i”, “l”), ordered = TRUE)</p></li>
<li><p>exercise &lt; -factor(c(“l”, “n”, “n”, “i”, “l”), levels = c(“n”, “l”, “i”), ordered = FALSE)</p></li>
<li><p>exercise &lt;- factor(c(“l”, “n”, “n”, “i”, “l”), levels = c(“n”, “l”, “i”), ordered = TRUE)</p></li>
</ol>
</div>
<div id="solution" class="section level2 solution">
<h2>Solution</h2>
<p>Correct solution is <strong>d)</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a>exercise &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;l&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;n&quot;</span>, <span class="st">&quot;i&quot;</span>, <span class="st">&quot;l&quot;</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;n&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;i&quot;</span>), <span class="dt">ordered =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>We only expect three cathegories (“n”, “l”, “i”). We can order these from least intense to most intense, so let’s use <code>ordered</code>.</p>
</div>
</div>
<div id="converting-factors" class="section level1">
<h1>Converting Factors</h1>
<p>Converting from a factor to a number can cause problems:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a>f &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="fl">3.4</span>, <span class="fl">1.2</span>, <span class="dv">5</span>))</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a><span class="kw">as.numeric</span>(f)</span></code></pre></div>
<pre class="output"><code>[1] 2 1 3</code></pre>
<p>This does not behave as expected (and there is no warning).</p>
<p>The recommended way is to use the integer vector to index the factor levels:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">levels</span>(f)[f]</span></code></pre></div>
<pre class="output"><code>[1] &quot;3.4&quot; &quot;1.2&quot; &quot;5&quot;  </code></pre>
<p>This returns a character vector, the <code>as.numeric()</code> function is still required to convert the values to the proper type (numeric).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a>f &lt;-<span class="st"> </span><span class="kw">levels</span>(f)[f]</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>f &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(f)</span></code></pre></div>
</div>
<div id="using-factors" class="section level1">
<h1>Using Factors</h1>
<p>Lets load our example data to see the use of factors:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&#39;data/sample.csv&#39;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<aside class="callout">
<div id="default-behavior" class="section level3">
<h3>Default Behavior</h3>
<p><code>stringsAsFactors = TRUE</code> is the default behavior for R. We could leave this argument out. It is included here for clarity.</p>
</div>
</aside>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="kw">str</span>(dat)</span></code></pre></div>
<pre class="output"><code>&#39;data.frame&#39;:   100 obs. of  9 variables:
 $ ID           : Factor w/ 100 levels &quot;Sub001&quot;,&quot;Sub002&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
 $ Gender       : Factor w/ 4 levels &quot;f&quot;,&quot;F&quot;,&quot;m&quot;,&quot;M&quot;: 3 3 3 1 3 4 1 3 3 1 ...
 $ Group        : Factor w/ 3 levels &quot;Control&quot;,&quot;Treatment1&quot;,..: 1 3 3 2 2 3 1 3 3 1 ...
 $ BloodPressure: int  132 139 130 105 125 112 173 108 131 129 ...
 $ Age          : num  16 17.2 19.5 15.7 19.9 14.3 17.7 19.8 19.4 18.8 ...
 $ Aneurisms_q1 : int  114 148 196 199 188 260 135 216 117 188 ...
 $ Aneurisms_q2 : int  140 209 251 140 120 266 98 238 215 144 ...
 $ Aneurisms_q3 : int  202 248 122 233 222 320 154 279 181 192 ...
 $ Aneurisms_q4 : int  237 248 177 220 228 294 245 251 272 185 ...</code></pre>
<p>Notice the first 3 columns have been converted to factors. These values were text in the data file so R automatically interpreted them as categorical variables.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a><span class="kw">summary</span>(dat)</span></code></pre></div>
<pre class="output"><code>       ID     Gender        Group    BloodPressure        Age       
 Sub001 : 1   f:35   Control   :30   Min.   : 62.0   Min.   :12.10  
 Sub002 : 1   F: 4   Treatment1:35   1st Qu.:107.5   1st Qu.:14.78  
 Sub003 : 1   m:46   Treatment2:35   Median :117.5   Median :16.65  
 Sub004 : 1   M:15                   Mean   :118.6   Mean   :16.42  
 Sub005 : 1                          3rd Qu.:133.0   3rd Qu.:18.30  
 Sub006 : 1                          Max.   :173.0   Max.   :20.00  
 (Other):94                                                         
  Aneurisms_q1    Aneurisms_q2    Aneurisms_q3    Aneurisms_q4  
 Min.   : 65.0   Min.   : 80.0   Min.   :105.0   Min.   :116.0  
 1st Qu.:118.0   1st Qu.:131.5   1st Qu.:182.5   1st Qu.:186.8  
 Median :158.0   Median :162.5   Median :217.0   Median :219.0  
 Mean   :158.8   Mean   :168.0   Mean   :219.8   Mean   :217.9  
 3rd Qu.:188.0   3rd Qu.:196.8   3rd Qu.:248.2   3rd Qu.:244.2  
 Max.   :260.0   Max.   :283.0   Max.   :323.0   Max.   :315.0  
                                                                </code></pre>
<p>Notice the <code>summary()</code> function handles factors differently to numbers (and strings), the occurrence counts for each value is often more useful information.</p>
<aside class="callout">
<div id="the-summary-function" class="section level3">
<h3>The <code>summary()</code> Function</h3>
<p>The <code>summary()</code> function is a great way of spotting errors in your data (look at the <em>dat$Gender</em> column). It’s also a great way for spotting missing data.</p>
</div>
</aside>
<div class="challenge">
<div id="reordering-factors" class="section level2">
<h2>Reordering Factors</h2>
<p>The function <code>table()</code> tabulates observations and can be used to create bar plots quickly. For instance:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a><span class="kw">table</span>(dat<span class="op">$</span>Group)</span></code></pre></div>
<pre class="output"><code>
   Control Treatment1 Treatment2 
        30         35         35 </code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a><span class="kw">barplot</span>(<span class="kw">table</span>(dat<span class="op">$</span>Group))</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-reordering-factors-1.png" title="plot of chunk reordering-factors" alt="plot of chunk reordering-factors" style="display: block; margin: auto;" /></p>
<p>Use the <code>factor()</code> command to modify the column dat$Group so that the <em>control</em> group is plotted last.</p>
</div>
<div id="solution-1" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a>dat<span class="op">$</span>Group &lt;-<span class="st"> </span><span class="kw">factor</span>(dat<span class="op">$</span>Group, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Treatment1&quot;</span>, <span class="st">&quot;Treatment2&quot;</span>, <span class="st">&quot;Control&quot;</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true"></a><span class="kw">barplot</span>(<span class="kw">table</span>(dat<span class="op">$</span>Group))</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-reordering-factors-2-1.png" title="plot of chunk reordering-factors-2" alt="plot of chunk reordering-factors-2" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="removing-levels-from-a-factor" class="section level1">
<h1>Removing Levels from a Factor</h1>
<p>Some of the Gender values in our dataset have been coded incorrectly. Let’s remove levels from this factor.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a><span class="kw">barplot</span>(<span class="kw">table</span>(dat<span class="op">$</span>Gender))</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-gender-counts-1.png" title="plot of chunk gender-counts" alt="plot of chunk gender-counts" style="display: block; margin: auto;" /></p>
<p>Values should have been recorded as lowercase ‘m’ and ‘f’. We should correct this.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a>dat<span class="op">$</span>Gender[dat<span class="op">$</span>Gender <span class="op">==</span><span class="st"> &#39;M&#39;</span>] &lt;-<span class="st"> &#39;m&#39;</span></span></code></pre></div>
<div class="challenge">
<div id="updating-factors" class="section level2">
<h2>Updating Factors</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="kw">plot</span>(<span class="dt">x =</span> dat<span class="op">$</span>Gender, <span class="dt">y =</span> dat<span class="op">$</span>BloodPressure)</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-updating-factors-1.png" title="plot of chunk updating-factors" alt="plot of chunk updating-factors" style="display: block; margin: auto;" /></p>
<p>Why does this plot show 4 levels?</p>
<p><em>Hint</em> how many levels does dat$Gender have?</p>
</div>
<div id="solution-2" class="section level2 solution">
<h2>Solution</h2>
<p><code>dat$Gender</code> has 4 levels, so the plot shows 4 levels.</p>
</div>
</div>
<p>We need to tell R that “M” is no longer a valid value for this column. We use the <code>droplevels()</code> function to remove extra levels.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a>dat<span class="op">$</span>Gender &lt;-<span class="st"> </span><span class="kw">droplevels</span>(dat<span class="op">$</span>Gender)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a><span class="kw">plot</span>(<span class="dt">x =</span> dat<span class="op">$</span>Gender, <span class="dt">y =</span> dat<span class="op">$</span>BloodPressure)</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-dropping-levels-1.png" title="plot of chunk dropping-levels" alt="plot of chunk dropping-levels" style="display: block; margin: auto;" /></p>
<aside class="callout">
<div id="adjusting-factor-levels" class="section level3">
<h3>Adjusting Factor Levels</h3>
<p>Adjusting the <code>levels()</code> of a factor provides a useful shortcut for reassigning values in this case.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a><span class="kw">levels</span>(dat<span class="op">$</span>Gender)[<span class="dv">2</span>] &lt;-<span class="st"> &#39;f&#39;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true"></a><span class="kw">plot</span>(<span class="dt">x =</span> dat<span class="op">$</span>Gender, <span class="dt">y =</span> dat<span class="op">$</span>BloodPressure)</span></code></pre></div>
<p><img src="fig/12-supp-factors-rendered-adjusting-levels-1.png" title="plot of chunk adjusting-levels" alt="plot of chunk adjusting-levels" style="display: block; margin: auto;" /></p>
</div>
</aside>
<p>{% include links.md %}</p>
<div id="keypoints" class="section level2 keypoints">
<h2>Keypoints</h2>
<ul>
<li>Factors are used to represent categorical data.</li>
<li>Factors can be <em>ordered</em> or <em>unordered</em>.</li>
<li>Some R functions have special methods for handling factors.</li>
</ul>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


<!-- END:   inst/pkgdown/templates/content-title-body.html-->


      <footer>
      <!-- START: inst/pkgdown/templates/footer.html -->
<div class="container">
  <div class="row">
    <div class="col-xs-1">
      <h3 class="text-left">
        <a href="11-supp-read-write-csv.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      </h3>
    </div>
    <div class="col-xs-10">
      <h3 class="maintitle"><a href="index.html">Programming With R</a></h3>
    </div>
    <div class="col-xs-1">
      <h3 class="text-right">
        <a href="13-supp-data-structures.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      </h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2018–2021
      by <a href="https://carpentries.org">The Carpentries</a>
      <br>
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2016–2018
      by <a href="https://softwarecarpentry.org">Software Carpentry Foundation</a>
    </div>
    <div class="col-md-6 help-links pull-right" align="right">
      <a href="https://github.com/zkamvar/new-programming-with-r/edit/main/episodes/12-supp-factors.Rmd" data-checker-ignore>Edit on GitHub</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CONTRIBUTING.md" data-checker-ignore>Contributing</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/">Source</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CITATION" data-checker-ignore>Cite</a>
      /
      <a href="mailto:zkamvar@carpentries.org">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/zkamvar/sandpaper">{sandpaper}</a>
      and <a href="https://github.com/zkamvar/varnish">{varnish}</a>.
    </div>
  </div>
</div>
<!-- END:   inst/pkgdown/templates/footer.html-->

      </footer>
   </div>

  <!-- START: inst/pkgdown/templates/docsearch.html -->

<!-- END:   inst/pkgdown/templates/docsearch.html-->


  </body>
</html>

<!-- END:   inst/pkgdown/templates/layout.html-->

