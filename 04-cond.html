<!-- START: inst/pkgdown/templates/layout.html -->
<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- START: inst/pkgdown/templates/head.html -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="last-modified" content="2021-01-27 03:47:15 +0000">



<title>Programming With R: Making Choices</title>

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="favicons/swc/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="favicons/swc/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="favicons/swc/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="favicons/swc/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="favicons/swc/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="favicons/swc/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/swc/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/swc/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-128.png" sizes="128x128" />

<meta name="application-name" content="Software Carpentry - Programming With R"/>

<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="favicons/swc/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="favicons/swc/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="favicons/swc/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="favicons/swc/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="favicons/swc/mstile-310x310.png" />



<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>

<!--carpentries-->
<link href="css/syntax.css" rel="stylesheet">
<link href="css/lesson.css" rel="stylesheet">
<script src="js/lesson.js"></script>




<meta property="og:title" content="Making Choices" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- END:   inst/pkgdown/templates/head.html-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <!-- START: inst/pkgdown/templates/navbar.html -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Home</a>
        <!-- TODO: the logo is not centered in the nav bar and looks ugly... also there needs to be a better way of choosing the logo... probably on the R side.-->
        <a href="https://software-carpentry.org" class="pull-left">
          <img class="navbar-logo" src="img/swc-icon-blue.svg" alt="Software Carpentry logo" />
        </a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="CODE_OF_CONDUCT.html">Code of Conduct</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Episodes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-starting-with-data.html">Analyzing Patient Data</a>
    </li>
    <li>
      <a href="02-func-R.html">Creating Functions</a>
    </li>
    <li>
      <a href="03-loops-R.html">Analyzing Multiple Data Sets</a>
    </li>
    <li>
      <a href="04-cond.html">Making Choices</a>
    </li>
    <li>
      <a href="05-cmdline.html">Command-Line Programs</a>
    </li>
    <li>
      <a href="06-best-practices-R.html">Best Practices for Writing R Code</a>
    </li>
    <li>
      <a href="07-knitr-R.html">Dynamic Reports with knitr</a>
    </li>
    <li>
      <a href="08-making-packages-R.html">Making Packages in R</a>
    </li>
    <li>
      <a href="09-supp-intro-rstudio.html">Introduction to RStudio</a>
    </li>
    <li>
      <a href="10-supp-addressing-data.html">Addressing Data</a>
    </li>
    <li>
      <a href="11-supp-read-write-csv.html">Reading and Writing CSV Files</a>
    </li>
    <li>
      <a href="12-supp-factors.html">Understanding Factors</a>
    </li>
    <li>
      <a href="13-supp-data-structures.html">Data Types and Structures</a>
    </li>
    <li>
      <a href="14-supp-call-stack.html">The Call Stack</a>
    </li>
    <li>
      <a href="15-supp-loops-in-depth.html">Loops in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Learners
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="setup.html">Setup</a>
    </li>
    <li>
      <a href="reference.html"></a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Instructors
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="migration-notes.html">Migrating from Jekyll to {sandpaper}</a>
    </li>
  </ul>
</li>
<li class="dropdown-header">Learner Profiles</li>
<li>
  <a href="LICENSE.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

      <!--START: inst/pkgdown/templates/header.html-->


    <div class="panel panel-default life-cycle">
      <div id="life-cycle" class="panel-body alpha">
        
         This lesson is in the early stages of development (Alpha version) 
        
      </div>
    </div>


<!--END  : inst/pkgdown/templates/header.html-->

      </header>

<!-- START: inst/pkgdown/templates/content-title-body.html -->
<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Making Choices</h1>
    </div>

<div class="objectives">
<div class="section level2">
<h2>Overview</h2>
  <div class="row">
    <div class="col-md-3">
  
<p><strong>Teaching: </strong> 30<br />
<strong>Exercises: </strong> 0</p>
    </div>
    <div class="col-md-9">
  
<p><strong>Questions</strong></p>
</div>
<div id="questions" class="section level2">
<h2>Questions</h2>
<ul>
<li>How do I make choices using <code>if</code> and <code>else</code> statements?</li>
<li>How do I compare values?</li>
<li>How do I save my plots to a PDF file?</li>
</ul>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-3">
  
    </div>
    <div class="col-md-9">
  
<p><strong>Objectives</strong></p>
</div>
<div id="objectives" class="section level2">
<h2>Objectives</h2>
<ul>
<li>Save plot(s) in a PDF file.</li>
<li>Write conditional statements with <code>if</code> and <code>else</code>.</li>
<li>Correctly evaluate expressions containing <code>&amp;&amp;</code> (‘and’) and <code>||</code> (‘or’).</li>
</ul>
    </div>
  </div>
  
</div>
<p>Our previous lessons have shown us how to manipulate data, define our own functions, and repeat things. However, the programs we have written so far always do the same things, regardless of what data they’re given. We want programs to make choices based on the values they are manipulating.</p>
<div id="saving-plots-to-a-file" class="section level3">
<h3>Saving Plots to a File</h3>
<p>So far, we have built a function <code>analyze</code> to plot summary statistics of the inflammation data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>analyze &lt;-<span class="st"> </span><span class="cf">function</span>(filename) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>  <span class="co"># Plots the average, min, and max inflammation over time.</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a>  <span class="co"># Input is character string of a csv file.</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>  dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> filename, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>  avg_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, mean)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>  <span class="kw">plot</span>(avg_day_inflammation)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a>  max_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, max)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>  <span class="kw">plot</span>(max_day_inflammation)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>  min_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, min)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>  <span class="kw">plot</span>(min_day_inflammation)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>}</span></code></pre></div>
<p>And also built the function <code>analyze_all</code> to automate the processing of each data file:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>analyze_all &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">folder =</span> <span class="st">&quot;data&quot;</span>, pattern) {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>  <span class="co"># Runs the function analyze for each file in the given folder</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>  <span class="co"># that contains the given pattern.</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>  filenames &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="dt">path =</span> folder, <span class="dt">pattern =</span> pattern, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a>  <span class="cf">for</span> (f <span class="cf">in</span> filenames) {</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>    <span class="kw">analyze</span>(f)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>  }</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>}</span></code></pre></div>
<p>While these are useful in an interactive R session, what if we want to send our results to our collaborators? Since we currently have 12 data sets, running <code>analyze_all</code> creates 36 plots. Saving each of these individually would be tedious and error-prone. And in the likely situation that we want to change how the data is processed or the look of the plots, we would have to once again save all 36 before sharing the updated results with our collaborators.</p>
<p>Here’s how we can save all three plots of the first inflammation data set in a pdf file:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">pdf</span>(<span class="st">&quot;inflammation-01.pdf&quot;</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">analyze</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a><span class="kw">dev.off</span>()</span></code></pre></div>
<p>The function <code>pdf</code> redirects all the plots generated by R into a pdf file, which in this case we have named “inflammation-01.pdf”. After we are done generating the plots to be saved in the pdf file, we stop R from redirecting plots with the function <code>dev.off</code>.</p>
<aside class="callout">
</div>
</div>
<div id="overwriting-plots" class="section level2">
<h2>Overwriting Plots</h2>
<p>If you run <code>pdf</code> multiple times without running <code>dev.off</code>, you will save plots to the most recently opened file. However, you won’t be able to open the previous pdf files because the connections were not closed. In order to get out of this situation, you’ll need to run <code>dev.off</code> until all the pdf connections are closed. You can check your current status using the function <code>dev.cur</code>. If it says “pdf”, all your plots are being saved in the last pdf specified. If it says “null device” or “RStudioGD”, the plots will be visualized normally.</p>
</aside>
<p>We can update the <code>analyze</code> function so that it always saves the plots in a pdf. But that would make it more difficult to interactively test out new changes. It would be ideal if <code>analyze</code> would either save or not save the plots based on its input.</p>
<div id="conditionals" class="section level3">
<h3>Conditionals</h3>
<p>In order to update our function to decide between saving or not, we need to write code that automatically decides between multiple options. The computer can make these deicisons through logical comparisons.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>num &lt;-<span class="st"> </span><span class="dv">37</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>num <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<pre class="output"><code>[1] FALSE</code></pre>
<p>As 37 is not greater than 100, this returns a <code>FALSE</code> object. And as you likely guessed, the opposite of <code>FALSE</code> is <code>TRUE</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a>num <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<pre class="output"><code>[1] TRUE</code></pre>
<p>We pair these logical comparison tools with what R calls a <a href="reference.html#conditional-statement">conditional statement</a>, and it looks like this:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>num &lt;-<span class="st"> </span><span class="dv">37</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="cf">if</span> (num <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>) {</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a>  <span class="kw">print</span>(<span class="st">&quot;greater&quot;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a>  <span class="kw">print</span>(<span class="st">&quot;not greater&quot;</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a>}</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="kw">print</span>(<span class="st">&quot;done&quot;</span>)</span></code></pre></div>
<pre class="output"><code>[1] &quot;not greater&quot;
[1] &quot;done&quot;</code></pre>
<p>The second line of this code uses an <code>if</code> statement to tell R that we want to make a choice. If the following test is <code>TRUE</code>, the body of the <code>if</code> (i.e., the lines in the curly braces underneath it) are executed. If the test is <code>FALSE</code>, the body of the <code>else</code> is executed instead. Only one or the other is ever executed:</p>
<p><img src="fig/python-flowchart-conditional.svg" alt="Executing a Conditional" /></p>
<p>In the example above, the test <code>num &gt; 100</code> returns the value <code>FALSE</code>, which is why the code inside the <code>if</code> block was skipped and the code inside the <code>else</code> statement was run instead.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a>num <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<pre class="output"><code>[1] FALSE</code></pre>
<p>And as you likely guessed, the opposite of <code>FALSE</code> is <code>TRUE</code>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>num <span class="op">&lt;</span><span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<pre class="output"><code>[1] TRUE</code></pre>
<p>Conditional statements don’t have to include an <code>else</code>. If there isn’t one, R simply does nothing if the test is false:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>num &lt;-<span class="st"> </span><span class="dv">53</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a><span class="cf">if</span> (num <span class="op">&gt;</span><span class="st"> </span><span class="dv">100</span>) {</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a>  <span class="kw">print</span>(<span class="st">&quot;num is greater than 100&quot;</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a>}</span></code></pre></div>
<p>We can also chain several tests together when there are more than two options. This makes it simple to write a function that returns the sign of a number:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>sign &lt;-<span class="st"> </span><span class="cf">function</span>(num) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>  <span class="cf">if</span> (num <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>    <span class="kw">return</span>(<span class="dv">1</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>  } <span class="cf">else</span> <span class="cf">if</span> (num <span class="op">==</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>    <span class="kw">return</span>(<span class="dv">0</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a>    <span class="kw">return</span>(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a>  }</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true"></a>}</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true"></a><span class="kw">sign</span>(<span class="op">-</span><span class="dv">3</span>)</span></code></pre></div>
<pre class="output"><code>[1] -1</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="kw">sign</span>(<span class="dv">0</span>)</span></code></pre></div>
<pre class="output"><code>[1] 0</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true"></a><span class="kw">sign</span>(<span class="dv">2</span><span class="op">/</span><span class="dv">3</span>)</span></code></pre></div>
<pre class="output"><code>[1] 1</code></pre>
<p>Note that when combining <code>else</code> and <code>if</code> in an <code>else if</code> statement, the <code>if</code> portion still requires a direct input condition. This is never the case for the <code>else</code> statement alone, which is only executed if all other conditions go unsatisfied. Note that the test for equality uses two equal signs, <code>==</code>.</p>
<aside class="callout">
</div>
</div>
<div id="other-comparisons" class="section level2">
<h2>Other Comparisons</h2>
<p>Other tests include greater than or equal to (<code>&gt;=</code>), less than or equal to (<code>&lt;=</code>), and not equal to (<code>!=</code>).</p>
</aside>
<p>We can also combine tests. Two ampersands, <code>&amp;&amp;</code>, symbolize “and”. Two vertical bars, <code>||</code>, symbolize “or”. <code>&amp;&amp;</code> is only true if both parts are true:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true"></a><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="dv">-1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&quot;both parts are true&quot;</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true"></a>  <span class="kw">print</span>(<span class="st">&quot;at least one part is not true&quot;</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true"></a>}</span></code></pre></div>
<pre class="output"><code>[1] &quot;at least one part is not true&quot;</code></pre>
<p>while <code>||</code> is true if either part is true:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true"></a><span class="cf">if</span> (<span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span> <span class="op">||</span><span class="st"> </span><span class="dv">-1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true"></a>    <span class="kw">print</span>(<span class="st">&quot;at least one part is true&quot;</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true"></a>} <span class="cf">else</span> {</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true"></a>  <span class="kw">print</span>(<span class="st">&quot;neither part is true&quot;</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true"></a>}</span></code></pre></div>
<pre class="output"><code>[1] &quot;at least one part is true&quot;</code></pre>
<p>In this case, “either” means “either or both”, not “either one or the other but not both”.</p>
</div>
<div class="challenge">
<div id="choosing-plots-based-on-data" class="section level2">
<h2>Choosing Plots Based on Data</h2>
<p>Write a function <code>plot_dist</code> that plots a boxplot if the length of the vector is greater than a specified threshold and a stripchart otherwise. To do this you’ll use the R functions <code>boxplot</code> and <code>stripchart</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true"></a><span class="kw">plot_dist</span>(dat[, <span class="dv">10</span>], <span class="dt">threshold =</span> <span class="dv">10</span>)     <span class="co"># day (column) 10</span></span></code></pre></div>
<p><img src="fig/04-cond-rendered-using-conditions-01-1.png" title="plot of chunk using-conditions-01" alt="plot of chunk using-conditions-01" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true"></a><span class="kw">plot_dist</span>(dat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">10</span>], <span class="dt">threshold =</span> <span class="dv">10</span>)  <span class="co"># samples (rows) 1-5 on day (column) 10</span></span></code></pre></div>
<p><img src="fig/04-cond-rendered-using-conditions-01-2.png" title="plot of chunk using-conditions-01" alt="plot of chunk using-conditions-01" style="display: block; margin: auto;" /></p>
</div>
<div id="solution" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true"></a>plot_dist &lt;-<span class="st"> </span><span class="cf">function</span>(x, threshold) {</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span>threshold) {</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true"></a>    <span class="kw">boxplot</span>(x)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true"></a>  } <span class="cf">else</span> {</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true"></a>    <span class="kw">stripchart</span>(x)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true"></a>  }</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div>
<div class="challenge">
<div id="histograms-instead" class="section level2">
<h2>Histograms Instead</h2>
<p>One of your collaborators prefers to see the distributions of the larger vectors as a histogram instead of as a boxplot. In order to choose between a histogram and a boxplot we will edit the function <code>plot_dist</code> and add an additional argument <code>use_boxplot</code>. By default we will set <code>use_boxplot</code> to <code>TRUE</code> which will create a boxplot when the vector is longer than <code>threshold</code>. When <code>use_boxplot</code> is set to <code>FALSE</code>, <code>plot_dist</code> will instead plot a histogram for the larger vectors. As before, if the length of the vector is shorter than <code>threshold</code>, <code>plot_dist</code> will create a stripchart. A histogram is made with the <code>hist</code> command in R.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true"></a><span class="kw">plot_dist</span>(dat[, <span class="dv">10</span>], <span class="dt">threshold =</span> <span class="dv">10</span>, <span class="dt">use_boxplot =</span> <span class="ot">TRUE</span>)   <span class="co"># day (column) 10 - create boxplot</span></span></code></pre></div>
<p><img src="fig/04-cond-rendered-conditional-challenge-hist-1.png" title="plot of chunk conditional-challenge-hist" alt="plot of chunk conditional-challenge-hist" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true"></a><span class="kw">plot_dist</span>(dat[, <span class="dv">10</span>], <span class="dt">threshold =</span> <span class="dv">10</span>, <span class="dt">use_boxplot =</span> <span class="ot">FALSE</span>)  <span class="co"># day (column) 10 - create histogram</span></span></code></pre></div>
<p><img src="fig/04-cond-rendered-conditional-challenge-hist-2.png" title="plot of chunk conditional-challenge-hist" alt="plot of chunk conditional-challenge-hist" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true"></a><span class="kw">plot_dist</span>(dat[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">10</span>], <span class="dt">threshold =</span> <span class="dv">10</span>)                    <span class="co"># samples (rows) 1-5 on day (column) 10</span></span></code></pre></div>
<p><img src="fig/04-cond-rendered-conditional-challenge-hist-3.png" title="plot of chunk conditional-challenge-hist" alt="plot of chunk conditional-challenge-hist" style="display: block; margin: auto;" /></p>
</div>
<div id="solution-1" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true"></a>plot_dist &lt;-<span class="st"> </span><span class="cf">function</span>(x, threshold, <span class="dt">use_boxplot =</span> <span class="ot">TRUE</span>) {</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true"></a>   <span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span>threshold <span class="op">&amp;&amp;</span><span class="st"> </span>use_boxplot) {</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true"></a>       <span class="kw">boxplot</span>(x)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true"></a>   } <span class="cf">else</span> <span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&gt;</span><span class="st"> </span>threshold <span class="op">&amp;&amp;</span><span class="st"> </span><span class="op">!</span>use_boxplot) {</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true"></a>       <span class="kw">hist</span>(x)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true"></a>   } <span class="cf">else</span> {</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true"></a>       <span class="kw">stripchart</span>(x)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true"></a>   }</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div>
<div class="challenge">
<div id="find-the-maximum-inflammation-score" class="section level2">
<h2>Find the Maximum Inflammation Score</h2>
<p>Find the file containing the patient with the highest average inflammation score. Print the file name, the patient number (row number) and the value of the maximum average inflammation score.</p>
<p>Tips:</p>
<ol style="list-style-type: decimal">
<li>Use variables to store the maximum average and update it as you go through files and patients.</li>
<li>You can use nested loops (one loop is inside the other) to go through the files as well as through the patients in each file (every row).</li>
</ol>
<p>Complete the code below:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true"></a>filenames &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="dt">path =</span> <span class="st">&quot;data&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;inflammation-[0-9]{2}.csv&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true"></a>filename_max &lt;-<span class="st"> &quot;&quot;</span> <span class="co"># filename where the maximum average inflammation patient is found</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true"></a>patient_max &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># index (row number) for this patient in this file</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true"></a>average_inf_max &lt;-<span class="st"> </span><span class="dv">0</span> <span class="co"># value of the average inflammation score for this patient</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true"></a><span class="cf">for</span> (f <span class="cf">in</span> filenames) {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true"></a>  dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> f, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true"></a>  dat.means &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">1</span>, mean)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true"></a>  <span class="cf">for</span> (patient_index <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(dat.means)){</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true"></a>    patient_average_inf &lt;-<span class="st"> </span>dat.means[patient_index]</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true"></a>    <span class="co"># Add your code here ...</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true"></a>  }</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true"></a>}</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true"></a><span class="kw">print</span>(filename_max)</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true"></a><span class="kw">print</span>(patient_max)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true"></a><span class="kw">print</span>(average_inf_max)</span></code></pre></div>
</div>
<div id="solution-2" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true"></a><span class="co"># Add your code here ...</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true"></a><span class="cf">if</span> (patient_average_inf <span class="op">&gt;</span><span class="st"> </span>average_inf_max) {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true"></a>  average_inf_max &lt;-<span class="st"> </span>patient_average_inf</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true"></a>  filename_max &lt;-<span class="st"> </span>f</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true"></a>  patient_max &lt;-<span class="st"> </span>patient_index</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div>
<div id="saving-automatically-generated-figures" class="section level3">
<h3>Saving Automatically Generated Figures</h3>
<p>Now that we know how to have R make decisions based on input values, let’s update <code>analyze</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true"></a>analyze &lt;-<span class="st"> </span><span class="cf">function</span>(filename, <span class="dt">output =</span> <span class="ot">NULL</span>) {</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true"></a>  <span class="co"># Plots the average, min, and max inflammation over time.</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true"></a>  <span class="co"># Input:</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true"></a>  <span class="co">#    filename: character string of a csv file</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true"></a>  <span class="co">#    output: character string of pdf file for saving</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(output)) {</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true"></a>    <span class="kw">pdf</span>(output)</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true"></a>  }</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true"></a>  dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> filename, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true"></a>  avg_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, mean)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true"></a>  <span class="kw">plot</span>(avg_day_inflammation)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true"></a>  max_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, max)</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true"></a>  <span class="kw">plot</span>(max_day_inflammation)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true"></a>  min_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, min)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true"></a>  <span class="kw">plot</span>(min_day_inflammation)</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(output)) {</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true"></a>    <span class="kw">dev.off</span>()</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true"></a>  }</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true"></a>}</span></code></pre></div>
<p>We added an argument, <code>output</code>, that by default is set to <code>NULL</code>. An <code>if</code> statement at the beginning checks the argument <code>output</code> to decide whether or not to save the plots to a pdf. Let’s break it down. The function <code>is.null</code> returns <code>TRUE</code> if a variable is <code>NULL</code> and <code>FALSE</code> otherwise. The exclamation mark, <code>!</code>, stands for “not”. Therefore the line in the <code>if</code> block is only executed if <code>output</code> is “not null”.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true"></a>output &lt;-<span class="st"> </span><span class="ot">NULL</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true"></a><span class="kw">is.null</span>(output)</span></code></pre></div>
<pre class="output"><code>[1] TRUE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true"></a><span class="op">!</span><span class="kw">is.null</span>(output)</span></code></pre></div>
<pre class="output"><code>[1] FALSE</code></pre>
<p>Now we can use <code>analyze</code> interactively, as before,</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true"></a><span class="kw">analyze</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>)</span></code></pre></div>
<p><img src="fig/04-cond-rendered-inflammation-01-1.png" title="plot of chunk inflammation-01" alt="plot of chunk inflammation-01" style="display: block; margin: auto;" /><img src="fig/04-cond-rendered-inflammation-01-2.png" title="plot of chunk inflammation-01" alt="plot of chunk inflammation-01" style="display: block; margin: auto;" /><img src="fig/04-cond-rendered-inflammation-01-3.png" title="plot of chunk inflammation-01" alt="plot of chunk inflammation-01" style="display: block; margin: auto;" /></p>
<p>but also use it to save plots,</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true"></a><span class="kw">analyze</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;inflammation-01.pdf&quot;</span>)</span></code></pre></div>
<p>Before going further, we will create a directory <code>results</code> for saving our plots. It is <a href="http://swcarpentry.github.io/good-enough-practices-in-scientific-computing/">good practice</a> in data analysis projects to save all output to a directory separate from the data and analysis code. You can create this directory using the shell command <a href="https://swcarpentry.github.io/shell-novice/03-create/">mkdir</a>, or the R function <code>dir.create()</code></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true"></a><span class="kw">dir.create</span>(<span class="st">&quot;results&quot;</span>)</span></code></pre></div>
<p>Now run <code>analyze</code> and save the plot in the <code>results</code> directory,</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true"></a><span class="kw">analyze</span>(<span class="st">&quot;data/inflammation-01.csv&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;results/inflammation-01.pdf&quot;</span>)</span></code></pre></div>
<p>This now works well when we want to process one data file at a time, but how can we specify the output file in <code>analyze_all</code>? We need to do two things:</p>
<ol style="list-style-type: decimal">
<li>Substitute the filename ending “csv” with “pdf”.</li>
<li>Save the plot to the <code>results</code> directory.</li>
</ol>
<p>To change the extension to “pdf”, we will use the function <code>sub</code>,</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true"></a>f &lt;-<span class="st"> &quot;inflammation-01.csv&quot;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true"></a><span class="kw">sub</span>(<span class="st">&quot;csv&quot;</span>, <span class="st">&quot;pdf&quot;</span>, f)</span></code></pre></div>
<pre class="output"><code>[1] &quot;inflammation-01.pdf&quot;</code></pre>
<p>To add the “results” directory to the filename use the function <code>file.path</code>,</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true"></a><span class="kw">file.path</span>(<span class="st">&quot;results&quot;</span>, <span class="kw">sub</span>(<span class="st">&quot;csv&quot;</span>, <span class="st">&quot;pdf&quot;</span>, f))</span></code></pre></div>
<pre class="output"><code>[1] &quot;results/inflammation-01.pdf&quot;</code></pre>
<p>Now let’s update <code>analyze_all</code>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true"></a>analyze_all &lt;-<span class="st"> </span><span class="cf">function</span>(pattern) {</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true"></a>  <span class="co"># Directory name containing the data</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true"></a>  data_dir &lt;-<span class="st"> &quot;data&quot;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true"></a>  <span class="co"># Directory name for results</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true"></a>  results_dir &lt;-<span class="st"> &quot;results&quot;</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true"></a>  <span class="co"># Runs the function analyze for each file in the current working directory</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true"></a>  <span class="co"># that contains the given pattern.</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true"></a>  filenames &lt;-<span class="st"> </span><span class="kw">list.files</span>(<span class="dt">path =</span> data_dir, <span class="dt">pattern =</span> pattern)</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true"></a>  <span class="cf">for</span> (f <span class="cf">in</span> filenames) {</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true"></a>    pdf_name &lt;-<span class="st"> </span><span class="kw">file.path</span>(results_dir, <span class="kw">sub</span>(<span class="st">&quot;csv&quot;</span>, <span class="st">&quot;pdf&quot;</span>, f))</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true"></a>    <span class="kw">analyze</span>(<span class="kw">file.path</span>(data_dir, f), <span class="dt">output =</span> pdf_name)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true"></a>  }</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true"></a>}</span></code></pre></div>
<p>Now we can save all of the results with just one line of code:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true"></a><span class="kw">analyze_all</span>(<span class="st">&quot;inflammation.*csv&quot;</span>)</span></code></pre></div>
<p>Now if we need to make any changes to our analysis, we can edit the <code>analyze</code> function and quickly regenerate all the figures with <code>analyze_all</code>.</p>
</div>
<div class="challenge">
<div id="changing-the-behavior-of-the-plot-command" class="section level2">
<h2>Changing the Behavior of the Plot Command</h2>
<p>One of your collaborators asks if you can recreate the figures with lines instead of points. Find the relevant argument to <code>plot</code> by reading the documentation (<code>?plot</code>), update <code>analyze</code>, and then recreate all the figures with <code>analyze_all</code>.</p>
</div>
<div id="solution-3" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true"></a>analyze &lt;-<span class="st"> </span><span class="cf">function</span>(filename, <span class="dt">output =</span> <span class="ot">NULL</span>) {</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true"></a>  <span class="co"># Plots the average, min, and max inflammation over time.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true"></a>  <span class="co"># Input:</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true"></a>  <span class="co">#    filename: character string of a csv file</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true"></a>  <span class="co">#    output: character string of pdf file for saving</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(output)) {</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true"></a>    <span class="kw">pdf</span>(output)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true"></a>  }</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true"></a>  dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> filename, <span class="dt">header =</span> <span class="ot">FALSE</span>)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true"></a>  avg_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, mean)</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true"></a>  <span class="kw">plot</span>(avg_day_inflammation, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true"></a>  max_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, max)</span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true"></a>  <span class="kw">plot</span>(max_day_inflammation, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true"></a>  min_day_inflammation &lt;-<span class="st"> </span><span class="kw">apply</span>(dat, <span class="dv">2</span>, min)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true"></a>  <span class="kw">plot</span>(min_day_inflammation, <span class="dt">type =</span> <span class="st">&quot;l&quot;</span>)</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(output)) {</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true"></a>    <span class="kw">dev.off</span>()</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true"></a>  }</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true"></a>}</span></code></pre></div>
</div>
</div>
<p>{% include links.md %}</p>
<div id="keypoints" class="section level2 keypoints">
<h2>Keypoints</h2>
<ul>
<li>Save a plot in a pdf file using <code>pdf("name.pdf")</code> and stop writing to the pdf file with <code>dev.off()</code>.</li>
<li>Use <code>if (condition)</code> to start a conditional statement, <code>else if (condition)</code> to provide additional tests, and <code>else</code> to provide a default.</li>
<li>The bodies of conditional statements must be surrounded by curly braces <code>{ }</code>.</li>
<li>Use <code>==</code> to test for equality.</li>
<li><code>X &amp;&amp; Y</code> is only true if both X and Y are true.</li>
<li><code>X || Y</code> is true if either X or Y, or both, are true.</li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


<!-- END:   inst/pkgdown/templates/content-title-body.html-->


      <footer>
      <!-- START: inst/pkgdown/templates/footer.html -->
<div class="container">
  <div class="row">
    <div class="col-xs-1">
      <h3 class="text-left">
        <a href="03-loops-R.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      </h3>
    </div>
    <div class="col-xs-10">
      <h3 class="maintitle"><a href="index.html">Programming With R</a></h3>
    </div>
    <div class="col-xs-1">
      <h3 class="text-right">
        <a href="05-cmdline.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      </h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2018–2021
      by <a href="https://carpentries.org">The Carpentries</a>
      <br>
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2016–2018
      by <a href="https://softwarecarpentry.org">Software Carpentry Foundation</a>
    </div>
    <div class="col-md-6 help-links pull-right" align="right">
      <a href="https://github.com/zkamvar/new-programming-with-r/edit/main/episodes/04-cond.Rmd" data-checker-ignore>Edit on GitHub</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CONTRIBUTING.md" data-checker-ignore>Contributing</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/">Source</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CITATION" data-checker-ignore>Cite</a>
      /
      <a href="mailto:zkamvar@carpentries.org">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/zkamvar/sandpaper">{sandpaper}</a>
      and <a href="https://github.com/zkamvar/varnish">{varnish}</a>.
    </div>
  </div>
</div>
<!-- END:   inst/pkgdown/templates/footer.html-->

      </footer>
   </div>

  <!-- START: inst/pkgdown/templates/docsearch.html -->

<!-- END:   inst/pkgdown/templates/docsearch.html-->


  </body>
</html>

<!-- END:   inst/pkgdown/templates/layout.html-->

