<!-- START: inst/pkgdown/templates/layout.html -->
<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- START: inst/pkgdown/templates/head.html -->
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="last-modified" content="2021-01-27 03:47:15 +0000">



<title>Programming With R: Best Practices for Writing R Code</title>

<link rel="apple-touch-icon-precomposed" sizes="57x57" href="favicons/swc/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="favicons/swc/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="favicons/swc/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="favicons/swc/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="favicons/swc/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="favicons/swc/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="favicons/swc/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="favicons/swc/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="favicons/swc/favicon-128.png" sizes="128x128" />

<meta name="application-name" content="Software Carpentry - Programming With R"/>

<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="favicons/swc/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="favicons/swc/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="favicons/swc/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="favicons/swc/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="favicons/swc/mstile-310x310.png" />



<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>

<!--carpentries-->
<link href="css/syntax.css" rel="stylesheet">
<link href="css/lesson.css" rel="stylesheet">
<script src="js/lesson.js"></script>




<meta property="og:title" content="Best Practices for Writing R Code" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- END:   inst/pkgdown/templates/head.html-->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-title-body">
      <header>
      <!-- START: inst/pkgdown/templates/navbar.html -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Home</a>
        <!-- TODO: the logo is not centered in the nav bar and looks ugly... also there needs to be a better way of choosing the logo... probably on the R side.-->
        <a href="https://software-carpentry.org" class="pull-left">
          <img class="navbar-logo" src="img/swc-icon-blue.svg" alt="Software Carpentry logo" />
        </a>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="CODE_OF_CONDUCT.html">Code of Conduct</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Episodes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="01-starting-with-data.html">Analyzing Patient Data</a>
    </li>
    <li>
      <a href="02-func-R.html">Creating Functions</a>
    </li>
    <li>
      <a href="03-loops-R.html">Analyzing Multiple Data Sets</a>
    </li>
    <li>
      <a href="04-cond.html">Making Choices</a>
    </li>
    <li>
      <a href="05-cmdline.html">Command-Line Programs</a>
    </li>
    <li>
      <a href="06-best-practices-R.html">Best Practices for Writing R Code</a>
    </li>
    <li>
      <a href="07-knitr-R.html">Dynamic Reports with knitr</a>
    </li>
    <li>
      <a href="08-making-packages-R.html">Making Packages in R</a>
    </li>
    <li>
      <a href="09-supp-intro-rstudio.html">Introduction to RStudio</a>
    </li>
    <li>
      <a href="10-supp-addressing-data.html">Addressing Data</a>
    </li>
    <li>
      <a href="11-supp-read-write-csv.html">Reading and Writing CSV Files</a>
    </li>
    <li>
      <a href="12-supp-factors.html">Understanding Factors</a>
    </li>
    <li>
      <a href="13-supp-data-structures.html">Data Types and Structures</a>
    </li>
    <li>
      <a href="14-supp-call-stack.html">The Call Stack</a>
    </li>
    <li>
      <a href="15-supp-loops-in-depth.html">Loops in R</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Learners
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="setup.html">Setup</a>
    </li>
    <li>
      <a href="reference.html"></a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    For Instructors
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="migration-notes.html">Migrating from Jekyll to {sandpaper}</a>
    </li>
  </ul>
</li>
<li class="dropdown-header">Learner Profiles</li>
<li>
  <a href="LICENSE.html">License</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

      <!--START: inst/pkgdown/templates/header.html-->


    <div class="panel panel-default life-cycle">
      <div id="life-cycle" class="panel-body alpha">
        
         This lesson is in the early stages of development (Alpha version) 
        
      </div>
    </div>


<!--END  : inst/pkgdown/templates/header.html-->

      </header>

<!-- START: inst/pkgdown/templates/content-title-body.html -->
<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>Best Practices for Writing R Code</h1>
    </div>

<div class="objectives">
<div class="section level2">
<h2>Overview</h2>
  <div class="row">
    <div class="col-md-3">
  
<p><strong>Teaching: </strong> 10<br />
<strong>Exercises: </strong> 0</p>
    </div>
    <div class="col-md-9">
  
<p><strong>Questions</strong></p>
</div>
<div id="questions" class="section level2">
<h2>Questions</h2>
<ul>
<li>How can I write R code that other people can understand and use?</li>
</ul>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-3">
  
    </div>
    <div class="col-md-9">
  
<p><strong>Objectives</strong></p>
</div>
<div id="objectives" class="section level2">
<h2>Objectives</h2>
<ul>
<li>Describe changes made to code for future reference.</li>
<li>Understand the importance about requirements and dependencies for your code.</li>
<li>Know when to use setwd().</li>
<li>To identify and segregate distinct components in your code using # or #-.</li>
<li>Additional best practice recommendations.</li>
</ul>
    </div>
  </div>
  
</div>
<div id="keep-track-of-who-wrote-your-code-and-its-intended-purpose" class="section level3">
<h3>Keep track of who wrote your code and its intended purpose</h3>
<p>Starting your code with an annotated description of what the code does when it is run will help you when you have to look at or change it in the future. Just one or two lines at the beginning of the file can save you or someone else a lot of time and effort when trying to understand what a particular script does.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="co"># This is code to replicate the analyses and figures from my 2014 Science</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="co"># paper. Code developed by Sarah Supp, Tracy Teal, and Jon Borelli</span></span></code></pre></div>
</div>
<div id="be-explicit-about-the-requirements-and-dependencies-of-your-code" class="section level3">
<h3>Be explicit about the requirements and dependencies of your code</h3>
<p>Loading all of the packages that will be necessary to run your code (using <code>library</code>) is a nice way of indicating which packages are necessary to run your code. It can be frustrating to make it two-thirds of the way through a long-running script only to find out that a dependency hasn’t been installed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">library</span>(reshape)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="kw">library</span>(vegan)</span></code></pre></div>
<p>Another way you can be explicit about the requirements of your code and improve it’s reproducibility is to limit the “hard-coding” of the input and output files for your script. If your code will read in data from a file, define a variable early in your code that stores the path to that file. For example</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a>input_file &lt;-<span class="st"> &quot;data/data.csv&quot;</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>output_file &lt;-<span class="st"> &quot;data/results.csv&quot;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a><span class="co"># read input</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a>input_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(input_file)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a><span class="co"># get number of samples in data</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>sample_number &lt;-<span class="st"> </span><span class="kw">nrow</span>(input_data)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true"></a><span class="co"># generate results</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true"></a>results &lt;-<span class="st"> </span><span class="kw">some_other_function</span>(input_file, sample_number)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true"></a><span class="co"># write results</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true"></a><span class="kw">write.table</span>(results, output_file)</span></code></pre></div>
<p>is preferable to</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="co"># check</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>input_data &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/data.csv&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a><span class="co"># get number of samples in data</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>sample_number &lt;-<span class="st"> </span><span class="kw">nrow</span>(input_data)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a><span class="co"># generate results</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>results &lt;-<span class="st"> </span><span class="kw">some_other_function</span>(<span class="st">&quot;data/data.csv&quot;</span>, sample_number)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a><span class="co"># write results</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a><span class="kw">write.table</span>(<span class="st">&quot;data/results.csv&quot;</span>, output_file)</span></code></pre></div>
<p>It is also worth considering what the working directory is. If the working directory must change, it is best to do that at the beginning of the script.</p>
<aside class="callout">
</div>
</div>
<div id="be-careful-when-using-setwd" class="section level2">
<h2>Be careful when using <code>setwd()</code></h2>
<p>One should exercise caution when using <code>setwd()</code>. Changing directories in a script file can limit reproducibility:</p>
<ul>
<li><code>setwd()</code> will return an error if the directory to which you’re trying to change doesn’t exist or if the user doesn’t have the correct permissions to access that directory. This becomes a problem when sharing scripts between users who have organized their directories differently.</li>
<li>If/when your script terminates with an error, you might leave the user in a different directory than the one they started in, and if they then call the script again, this will cause further problems. If you must use <code>setwd()</code>, it is best to put it at the top of the script to avoid these problems. The following error message indicates that R has failed to set the working directory you specified:</li>
</ul>
<pre><code>Error in setwd(&quot;~/path/to/working/directory&quot;) : cannot change working directory</code></pre>
<p>It is best practice to have the user running the script begin in a consistent directory on their machine and then use relative file paths from that directory to access files (see below).</p>
</aside>
<div id="identify-and-segregate-distinct-components-in-your-code" class="section level3">
<h3>Identify and segregate distinct components in your code</h3>
<p>It’s easy to annotate and mark your code using <code>#</code> or <code>#-</code> to set off sections of your code and to make finding specific parts of your code easier. For example, it’s often helpful when writing code to separate the function definitions. If you create only one or a few custom functions in your script, put them toward the top of your code. If you have written many functions, put them all in their own .R file and then <code>source</code> those files. <code>source</code> will define all of these functions so that your code can make use of them as needed.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="kw">source</span>(<span class="st">&quot;my_genius_fxns.R&quot;</span>)</span></code></pre></div>
</div>
<div id="other-ideas" class="section level3">
<h3>Other ideas</h3>
<ol style="list-style-type: decimal">
<li><p>Use a consistent style within your code. For example, name all matrices something ending in <code>_mat</code>. Consistency makes code easier to read and problems easier to spot.</p></li>
<li><p>Keep your code in bite-sized chunks. If a single function or loop gets too long, consider looking for ways to break it into smaller pieces.</p></li>
<li><p>Don’t repeat yourself–automate! If you are repeating the same code over and over, use a loop or a function to repeat that code for you. Needless repetition doesn’t just waste time–it also increases the likelihood you’ll make a costly mistake!</p></li>
<li><p>Keep all of your source files for a project in the same directory, then use relative paths as necessary to access them. For example, use</p></li>
</ol>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;files/dataset-2013-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>rather than:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a>dat &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&quot;/Users/Karthik/Documents/sannic-project/files/dataset-2013-01.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p>{:start=“5”} 5. R can run into memory issues. It is a common problem to run out of memory after running R scripts for a long time. To inspect the objects in your current R environment, you can list the objects, search current packages, and remove objects that are currently not in use. A good practice when running long lines of computationally intensive code is to remove temporary objects after they have served their purpose. However, sometimes, R will not clean up unused memory for a while after you delete objects. You can force R to tidy up its memory by using <code>gc()</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="co"># Sample dataset of 1000 rows</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a>interim_object &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dv">10</span>),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>                             <span class="kw">rep</span>(<span class="dv">101</span><span class="op">:</span><span class="dv">200</span>, <span class="dv">10</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true"></a>                             <span class="kw">rep</span>(<span class="dv">201</span><span class="op">:</span><span class="dv">300</span>, <span class="dv">10</span>))</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true"></a><span class="kw">object.size</span>(interim_object) <span class="co"># Reports the memory size allocated to the object</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true"></a><span class="kw">rm</span>(<span class="st">&quot;interim_object&quot;</span>) <span class="co"># Removes only the object itself and not necessarily the memory allotted to it</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true"></a><span class="kw">gc</span>() <span class="co"># Force R to release memory it is no longer using</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true"></a><span class="kw">ls</span>() <span class="co"># Lists all the objects in your current workspace</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true"></a><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>()) <span class="co"># If you want to delete all the objects in the workspace and start with a clean slate</span></span></code></pre></div>
<p>{:start=“6”} 6. Don’t save a session history (the default option in R, when it asks if you want an <code>RData</code> file). Instead, start in a clean environment so that older objects don’t remain in your environment any longer than they need to. If that happens, it can lead to unexpected results.</p>
<ol start="7" style="list-style-type: decimal">
<li><p>Wherever possible, keep track of <code>sessionInfo()</code> somewhere in your project folder. Session information is invaluable because it captures all of the packages used in the current project. If a newer version of a package changes the way a function behaves, you can always go back and reinstall the version that worked (Note: At least on CRAN, all older versions of packages are permanently archived).</p></li>
<li><p>Collaborate. Grab a buddy and practice “code review”. Review is used for preparing experiments and manuscripts; why not use it for code as well? Our code is also a major scientific achievement and the product of lots of hard work!</p></li>
<li><p>Develop your code using version control and frequent updates! You can find lessons about version control on [software-carpentry.org/lessons][swc-lessons].</p></li>
</ol>
</div>
</div>
<div class="challenge">
<div id="best-practice" class="section level2">
<h2>Best Practice</h2>
<ol style="list-style-type: decimal">
<li>What other suggestions do you have for coding best practices?</li>
<li>What are some specific ways we could restructure the code we worked on today to make it easier for a new user to read? Discuss with your neighbor.</li>
<li>Make two new R scripts called <code>inflammation.R</code> and <code>inflammation_fxns.R</code>. Copy and paste code into each script so that <code>inflammation.R</code> “does stuff” and <code>inflammation_fxns.R</code> holds all of your functions. <strong>Hint</strong>: you will need to add <code>source</code> to one of the files.</li>
</ol>
</div>
<div id="solution" class="section level2 solution">
<h2>Solution</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="fu">cat</span> inflammation.R</span></code></pre></div>
<pre class="output"><code># This code runs the inflammation data analysis.

source(&quot;inflammation_fxns.R&quot;)
analyze_all(&quot;inflammation.*csv&quot;)</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a><span class="fu">cat</span> inflammation_fxns.R</span></code></pre></div>
<pre class="output"><code># This is code for functions used in our inflammation data analysis.

analyze &lt;- function(filename, output = NULL) {
  # Plots the average, min, and max inflammation over time.
  # Input:
  #    filename: character string of a csv file
  #    output: character string of pdf file for saving
  if (!is.null(output)) {
    pdf(output)
  }
  dat &lt;- read.csv(file = filename, header = FALSE)
  avg_day_inflammation &lt;- apply(dat, 2, mean)
  plot(avg_day_inflammation)
  max_day_inflammation &lt;- apply(dat, 2, max)
  plot(max_day_inflammation)
  min_day_inflammation &lt;- apply(dat, 2, min)
  plot(min_day_inflammation)
  if (!is.null(output)) {
    dev.off()
  }
}

analyze_all &lt;- function(pattern) {
  # Directory name containing the data
  data_dir &lt;- &quot;data&quot;
  # Directory name for results
  results_dir &lt;- &quot;results&quot;
  # Runs the function analyze for each file in the current working directory
  # that contains the given pattern.
  filenames &lt;- list.files(path = data_dir, pattern = pattern)
  for (f in filenames) {
    pdf_name &lt;- file.path(results_dir, sub(&quot;csv&quot;, &quot;pdf&quot;, f))
    analyze(file.path(data_dir, f), output = pdf_name)
  }
}</code></pre>
</div>
</div>
<p>{% include links.md %}</p>
<div id="keypoints" class="section level2 keypoints">
<h2>Keypoints</h2>
<ul>
<li>Start each program with a description of what it does.</li>
<li>Then load all required packages.</li>
<li>Consider what working directory you are in when sourcing a script.</li>
<li>Use comments to mark off sections of code.</li>
<li>Put function definitions at the top of your file, or in a separate file if there are many.</li>
<li>Name and style code consistently.</li>
<li>Break code into small, discrete pieces.</li>
<li>Factor out common operations rather than repeating them.</li>
<li>Keep all of the source files for a project in one directory and use relative paths to access them.</li>
<li>Keep track of the memory used by your program.</li>
<li>Always start with a clean environment instead of saving the workspace.</li>
<li>Keep track of session information in your project folder.</li>
<li>Have someone else review your code.</li>
<li>Use version control.</li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


<!-- END:   inst/pkgdown/templates/content-title-body.html-->


      <footer>
      <!-- START: inst/pkgdown/templates/footer.html -->
<div class="container">
  <div class="row">
    <div class="col-xs-1">
      <h3 class="text-left">
        <a href="05-cmdline.html"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span><span class="sr-only">previous episode</span></a>
      </h3>
    </div>
    <div class="col-xs-10">
      <h3 class="maintitle"><a href="index.html">Programming With R</a></h3>
    </div>
    <div class="col-xs-1">
      <h3 class="text-right">
        <a href="07-knitr-R.html"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span><span class="sr-only">next episode</span></a>
      </h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6 copyright" align="left">
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2018–2021
      by <a href="https://carpentries.org">The Carpentries</a>
      <br>
      Licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY 4.0</a> 2016–2018
      by <a href="https://softwarecarpentry.org">Software Carpentry Foundation</a>
    </div>
    <div class="col-md-6 help-links pull-right" align="right">
      <a href="https://github.com/zkamvar/new-programming-with-r/edit/main/episodes/06-best-practices-R.Rmd" data-checker-ignore>Edit on GitHub</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CONTRIBUTING.md" data-checker-ignore>Contributing</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/">Source</a>
      /
      <a href="https://github.com/zkamvar/new-programming-with-r/blob/main/CITATION" data-checker-ignore>Cite</a>
      /
      <a href="mailto:zkamvar@carpentries.org">Contact</a>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12" align="center">
      Using <a href="https://github.com/zkamvar/sandpaper">{sandpaper}</a>
      and <a href="https://github.com/zkamvar/varnish">{varnish}</a>.
    </div>
  </div>
</div>
<!-- END:   inst/pkgdown/templates/footer.html-->

      </footer>
   </div>

  <!-- START: inst/pkgdown/templates/docsearch.html -->

<!-- END:   inst/pkgdown/templates/docsearch.html-->


  </body>
</html>

<!-- END:   inst/pkgdown/templates/layout.html-->

